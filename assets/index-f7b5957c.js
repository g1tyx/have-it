var tn=Object.defineProperty;var nn=(t,e,n)=>e in t?tn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ie=(t,e,n)=>(nn(t,typeof e!="symbol"?e+"":e,n),n),$e=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var _e=(t,e,n)=>($e(t,e,"read from private field"),n?n.call(t):e.get(t)),pe=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},De=(t,e,n,o)=>($e(t,e,"write to private field"),o?o.call(t,n):e.set(t,n),n);var je=(t,e,n)=>($e(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function le(){}function on(t,e){for(const n in e)t[n]=e[n];return t}function Vt(t){return t()}function ut(){return Object.create(null)}function me(t){t.forEach(Vt)}function Fe(t){return typeof t=="function"}function $(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function sn(t){return Object.keys(t).length===0}function Qt(t,e,n,o){if(t){const s=Wt(t,e,n,o);return t[0](s)}}function Wt(t,e,n,o){return t[1]&&o?on(n.ctx.slice(),t[1](o(e))):n.ctx}function Yt(t,e,n,o){if(t[2]&&o){const s=t[2](o(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const l=[],i=Math.max(e.dirty.length,s.length);for(let r=0;r<i;r+=1)l[r]=e.dirty[r]|s[r];return l}return e.dirty|s}return e.dirty}function Kt(t,e,n,o,s,l){if(s){const i=Wt(e,n,o,l);t.p(i,s)}}function Jt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let o=0;o<n;o++)e[o]=-1;return e}return-1}function ne(t){return t&&Fe(t.destroy)?t.destroy:le}const rn=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;"WeakMap"in rn;function v(t,e){t.appendChild(e)}function T(t,e,n){t.insertBefore(e,n||null)}function S(t){t.parentNode&&t.parentNode.removeChild(t)}function Ee(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function A(t){return document.createElement(t)}function ln(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function q(t){return document.createTextNode(t)}function F(){return q(" ")}function ae(){return q("")}function z(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function C(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function an(t){return Array.from(t.childNodes)}function fe(t,e){e=""+e,t.data!==e&&(t.data=e)}function ft(t,e){t.value=e??""}function ye(t,e,n){t.classList[n?"add":"remove"](e)}class Xt{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,o=null){this.e||(this.is_svg?this.e=ln(n.nodeName):this.e=A(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(o)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)T(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(S)}}function dt(t,e){return new t(e)}let Ne;function Pe(t){Ne=t}function zt(){if(!Ne)throw new Error("Function called outside component initialization");return Ne}function it(t){zt().$$.on_mount.push(t)}function rt(t){zt().$$.on_destroy.push(t)}const Me=[],de=[];let Ue=[];const et=[],cn=Promise.resolve();let tt=!1;function un(){tt||(tt=!0,cn.then(Zt))}function nt(t){Ue.push(t)}function ke(t){et.push(t)}const xe=new Set;let Oe=0;function Zt(){if(Oe!==0)return;const t=Ne;do{try{for(;Oe<Me.length;){const e=Me[Oe];Oe++,Pe(e),fn(e.$$)}}catch(e){throw Me.length=0,Oe=0,e}for(Pe(null),Me.length=0,Oe=0;de.length;)de.pop()();for(let e=0;e<Ue.length;e+=1){const n=Ue[e];xe.has(n)||(xe.add(n),n())}Ue.length=0}while(Me.length);for(;et.length;)et.pop()();tt=!1,xe.clear(),Pe(t)}function fn(t){if(t.fragment!==null){t.update(),me(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(nt)}}function dn(t){const e=[],n=[];Ue.forEach(o=>t.indexOf(o)===-1?e.push(o):n.push(o)),n.forEach(o=>o()),Ue=e}const qe=new Set;let Se;function he(){Se={r:0,c:[],p:Se}}function ve(){Se.r||me(Se.c),Se=Se.p}function I(t,e){t&&t.i&&(qe.delete(t),t.i(e))}function U(t,e,n,o){if(t&&t.o){if(qe.has(t))return;qe.add(t),Se.c.push(()=>{qe.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}const mn=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"];[...mn];function we(t,e,n){const o=t.$$.props[e];o!==void 0&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function Z(t){t&&t.c()}function K(t,e,n,o){const{fragment:s,after_update:l}=t.$$;s&&s.m(e,n),o||nt(()=>{const i=t.$$.on_mount.map(Vt).filter(Fe);t.$$.on_destroy?t.$$.on_destroy.push(...i):me(i),t.$$.on_mount=[]}),l.forEach(nt)}function J(t,e){const n=t.$$;n.fragment!==null&&(dn(n.after_update),me(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function gn(t,e){t.$$.dirty[0]===-1&&(Me.push(t),un(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function x(t,e,n,o,s,l,i,r=[-1]){const a=Ne;Pe(t);const c=t.$$={fragment:null,ctx:[],props:l,update:le,not_equal:s,bound:ut(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:ut(),dirty:r,skip_bound:!1,root:e.target||a.$$.root};i&&i(c.root);let u=!1;if(c.ctx=n?n(t,e.props||{},(d,f,...m)=>{const g=m.length?m[0]:f;return c.ctx&&s(c.ctx[d],c.ctx[d]=g)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](g),u&&gn(t,d)),f}):[],c.update(),u=!0,me(c.before_update),c.fragment=o?o(c.ctx):!1,e.target){if(e.hydrate){const d=an(e.target);c.fragment&&c.fragment.l(d),d.forEach(S)}else c.fragment&&c.fragment.c();e.intro&&I(t.$$.fragment),K(t,e.target,e.anchor,e.customElement),Zt()}Pe(a)}class ee{$destroy(){J(this,1),this.$destroy=le}$on(e,n){if(!Fe(n))return le;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const s=o.indexOf(n);s!==-1&&o.splice(s,1)}}$set(e){this.$$set&&!sn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var $t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Ge={};function _n(t,e){if(!Ge[t]){Ge[t]={};for(let n=0;n<t.length;n++)Ge[t][t.charAt(n)]=n}return Ge[t][e]}function pn(t){if(t==null)return"";let e=vn(t,6,n=>$t.charAt(n));switch(e.length%4){default:case 0:return e;case 1:return e+"===";case 2:return e+"==";case 3:return e+"="}}function hn(t){return t==null?"":t==""?null:bn(t.length,32,e=>_n($t,t.charAt(e)))}function vn(t,e,n){if(t==null)return"";let o=[],s={},l={},i,r,a,c="",u="",d="",f=2,m=3,g=2,_=0,p=0;for(r=0;r<t.length;r+=1)if(c=t.charAt(r),Object.prototype.hasOwnProperty.call(s,c)||(s[c]=m++,l[c]=!0),d=u+c,Object.prototype.hasOwnProperty.call(s,d))u=d;else{if(Object.prototype.hasOwnProperty.call(l,u)){if(u.charCodeAt(0)<256){for(i=0;i<g;i++)_=_<<1,p==e-1?(p=0,o.push(n(_)),_=0):p++;for(a=u.charCodeAt(0),i=0;i<8;i++)_=_<<1|a&1,p==e-1?(p=0,o.push(n(_)),_=0):p++,a=a>>1}else{for(a=1,i=0;i<g;i++)_=_<<1|a,p==e-1?(p=0,o.push(n(_)),_=0):p++,a=0;for(a=u.charCodeAt(0),i=0;i<16;i++)_=_<<1|a&1,p==e-1?(p=0,o.push(n(_)),_=0):p++,a=a>>1}f--,f==0&&(f=Math.pow(2,g),g++),delete l[u]}else for(a=s[u],i=0;i<g;i++)_=_<<1|a&1,p==e-1?(p=0,o.push(n(_)),_=0):p++,a=a>>1;f--,f==0&&(f=Math.pow(2,g),g++),s[d]=m++,u=String(c)}if(u!==""){if(Object.prototype.hasOwnProperty.call(l,u)){if(u.charCodeAt(0)<256){for(i=0;i<g;i++)_=_<<1,p==e-1?(p=0,o.push(n(_)),_=0):p++;for(a=u.charCodeAt(0),i=0;i<8;i++)_=_<<1|a&1,p==e-1?(p=0,o.push(n(_)),_=0):p++,a=a>>1}else{for(a=1,i=0;i<g;i++)_=_<<1|a,p==e-1?(p=0,o.push(n(_)),_=0):p++,a=0;for(a=u.charCodeAt(0),i=0;i<16;i++)_=_<<1|a&1,p==e-1?(p=0,o.push(n(_)),_=0):p++,a=a>>1}f--,f==0&&(f=Math.pow(2,g),g++),delete l[u]}else for(a=s[u],i=0;i<g;i++)_=_<<1|a&1,p==e-1?(p=0,o.push(n(_)),_=0):p++,a=a>>1;f--,f==0&&(f=Math.pow(2,g),g++)}for(a=2,i=0;i<g;i++)_=_<<1|a&1,p==e-1?(p=0,o.push(n(_)),_=0):p++,a=a>>1;for(;;)if(_=_<<1,p==e-1){o.push(n(_));break}else p++;return o.join("")}function bn(t,e,n){let o=[],s=4,l=4,i=3,r="",a=[],c,u,d,f,m,g,_,p={val:n(0),position:e,index:1};for(c=0;c<3;c+=1)o[c]=c;for(d=0,m=Math.pow(2,2),g=1;g!=m;)f=p.val&p.position,p.position>>=1,p.position==0&&(p.position=e,p.val=n(p.index++)),d|=(f>0?1:0)*g,g<<=1;switch(d){case 0:for(d=0,m=Math.pow(2,8),g=1;g!=m;)f=p.val&p.position,p.position>>=1,p.position==0&&(p.position=e,p.val=n(p.index++)),d|=(f>0?1:0)*g,g<<=1;_=String.fromCharCode(d);break;case 1:for(d=0,m=Math.pow(2,16),g=1;g!=m;)f=p.val&p.position,p.position>>=1,p.position==0&&(p.position=e,p.val=n(p.index++)),d|=(f>0?1:0)*g,g<<=1;_=String.fromCharCode(d);break;case 2:return""}for(o[3]=_,u=_,a.push(_);;){if(p.index>t)return"";for(d=0,m=Math.pow(2,i),g=1;g!=m;)f=p.val&p.position,p.position>>=1,p.position==0&&(p.position=e,p.val=n(p.index++)),d|=(f>0?1:0)*g,g<<=1;switch(_=d){case 0:for(d=0,m=Math.pow(2,8),g=1;g!=m;)f=p.val&p.position,p.position>>=1,p.position==0&&(p.position=e,p.val=n(p.index++)),d|=(f>0?1:0)*g,g<<=1;o[l++]=String.fromCharCode(d),_=l-1,s--;break;case 1:for(d=0,m=Math.pow(2,16),g=1;g!=m;)f=p.val&p.position,p.position>>=1,p.position==0&&(p.position=e,p.val=n(p.index++)),d|=(f>0?1:0)*g,g<<=1;o[l++]=String.fromCharCode(d),_=l-1,s--;break;case 2:return a.join("")}if(s==0&&(s=Math.pow(2,i),i++),o[_])r=o[_];else if(_===l&&typeof u=="string")r=u+u.charAt(0);else return null;a.push(r),o[l++]=u+r.charAt(0),s--,u=r,s==0&&(s=Math.pow(2,i),i++)}}function yn(){return new Worker("assets/compress-worker-43fb9e37.js")}const ot={};let Ve=0;function kn(t,e,n,...o){return Ve++,new Promise((s,l)=>(t.postMessage({__workhole:!0,action:"command",id:Ve,command:n,name:e,args:o}),ot[Ve]={resolve:s,reject:l}))}var Te,We,xt;class wn{constructor(e,n=`workhole${++Ve}`){pe(this,We);Ie(this,"exports",[]);Ie(this,"imports",new Set);pe(this,Te,{});this.worker=e,this.name=n,e.addEventListener("message",o=>{o.data.__workhole&&je(this,We,xt).call(this,o.data)})}export(e,n){if(typeof e!="object")throw new Error("Can only export objects");if(n===void 0)throw new Error("Can't export object without a name");this.worker.postMessage({__workhole:!0,action:"export",name:n}),this.exports[n]=e}revoke(e){this.worker.postMessage({__workhole:!0,action:"revoke",name:e}),delete this.exports[e]}import(e,n=!1){return new Proxy({},{get:(o,s)=>{if(s==="then"&&n){n=!1;return}return kn.bind(o,this.worker,e,s)}})}expectExport(e){return this.imports.has(e)?Promise.resolve(this.import(e,!0)):new Promise((n,o)=>{_e(this,Te)[e]={resolve:n,reject:o}})}onexport(e){}onrevoke(e){}}Te=new WeakMap,We=new WeakSet,xt=function(e){var n,o,s;if(e.action==="export"){this.imports.add(e.name),_e(this,Te)[e.name]&&(_e(this,Te)[e.name].resolve(this.import(e.name,!0)),delete _e(this,Te)[e.name]),this.onexport(e.name);return}if(e.action==="revoke"){this.imports.delete(e.name),this.onrevoke(e.name);return}if(e.action==="command"){const l=this.exports[e.name];if(l===void 0)throw new Error(`"${this.name}" does not export "${e.name}"`);this.worker.postMessage({__workhole:!0,action:"result",id:e.id,result:(o=(n=l[e.command])==null?void 0:n.call)==null?void 0:o.call(n,l,...e.args)});return}if(e.action==="result"){(s=ot[e.id])==null||s.resolve(e.result),delete ot[e.id];return}};var Ye,Ke,Je;const Xe=class{static encode(e){const n=JSON.stringify(e);return pn(n)}static async encodeAsync(e){return await _e(this,Je).compress(e)}static decode(e){if(!e)return null;try{const n=hn(e);return JSON.parse(n)}catch(n){return console.log("Failed to load:"),console.log(n),null}}};let Ce=Xe;Ye=new WeakMap,Ke=new WeakMap,Je=new WeakMap,pe(Ce,Ye,new yn),pe(Ce,Ke,new wn(_e(Xe,Ye))),pe(Ce,Je,_e(Xe,Ke).import("compressor"));var Ae,He;class En{constructor(e=null,n=null,o=[]){pe(this,Ae,null);Ie(this,"args",[]);Ie(this,"callback",null);Ie(this,"once",!1);pe(this,He,0);if(e===null)throw new Error("Trigger can't have empty event");if(n===null)throw new Error("Trigger can't have empty callback");De(this,Ae,e),this.callback=n,this.args=o}getEvent(){return _e(this,Ae)}cancel(){w.cancelHandler(this),De(this,Ae,null)}execute(...e){this.callback(...this.args,...e)}setPriority(e){return De(this,He,e),w.updatePriorities(_e(this,Ae)),this}getPriority(){return _e(this,He)}}Ae=new WeakMap,He=new WeakMap;const w=Object.assign(function(t,...e){w._processHandlers(t,e)},{_handlers:new Map,_executing:!1,_executionQueue:[],_prioritiesUsed:!1,_executeQueue(){if(this._executing)return;this._executing=!0;let t=null;for(;t=this._executionQueue.shift();){const[e,n]=t;e.execute(...n)}this._executing=!1},_removeFromQueue(t){this._executionQueue=this._executionQueue.filter(e=>e.handler!==t)},_queue(t,e){this._executionQueue.push([t,e]),this._executeQueue()},_processHandlers(t,e){const n=this._handlers.get(t);if(n)for(let o of n)o.once&&this.cancelHandler(o),o.execute(...e)},attachHandler(t){const e=t.getEvent(),n=this._handlers.get(e)??[];n.push(t),this._prioritiesUsed&&this.updatePriorities(t),this._handlers.set(e,n)},cancelHandler(t){this._removeFromQueue(t);const e=t.getEvent(),n=this._handlers.get(e);this._handlers.set(e,n.filter(o=>o!==t))},createEventHandler(t,e,...n){const o=new En(t,e,n);return this.attachHandler(o),o},updatePriorities(t){this._prioritiesUsed=!0,(this._handlers.get(t)??[]).sort((n,o)=>n.getPriority()-o.getPriority())},on(t,e,...n){const o=new Promise(s=>{let l=null;it(()=>{l=this.createEventHandler(t,e,...n),s(l)}),rt(()=>{var i;(i=l==null?void 0:l.cancel)==null||i.call(l)})});return o.setPriority=s=>o.then(l=>l.setPriority(s)),o},async once(t,e,...n){const o=await this.on(t,e,...n);return o.once=!0,o}});function Cn(t,e,n){const o="_Autosave",s="_BACKUP";let{state:r=Object.create(null)}=e,{id:a=Math.random()}=e,{prefix:c="Svelte_Game"}=e,{defaultState:u={}}=e,{autosaveInterval:d=6e4}=e,{actionsaveInterval:f=5e3}=e,{metaFunction:m=null}=e,{offlineFunction:g=null}=e,{actionsaveEvents:_=[]}=e,{backupEvents:p=[]}=e,b={},O=performance.now(),E=null;w.on("command-save-game",h),w.on("command-load-game",L),w.on("command-import-save",G),w.on("command-export-save",te),w.on("command-reset-game",X),w.on("command-update-save-info",M);for(const k of _)w.on(k,D).setPriority(1/0);for(const k of p)w.on(k,H,k).setPriority(-1/0);function y(k=o){return k===""&&(k=o),`${c}_Save_${k}`}async function h(k=o){clearTimeout(E),E=null,O=performance.now();const Q=await W();O=performance.now(),localStorage[y(k)]=Q,M([k]),w("game-saved",k)}function D(){if(E)return;const k=performance.now()-O;if(k>f){h();return}E=setTimeout(h,f-k)}function H(k=null){h(k===null?s:`${s}_${k}`)}function L(k,Q=!0){const P=localStorage[y(k)];G(P,Q),w("game-loaded",k)}function X(){n(0,r=Object.create(null)),n(1,a=Math.random()),Object.assign(r,u),w("game-reset")}let ie=null;function Y(k){ie&&clearInterval(ie),ie=setInterval(h,k)}function G(k,Q=!0){var R;const P=((R=k==null?void 0:k.split("."))==null?void 0:R.at(-1))??null;if(X(),!P)return;const ce=Ce.decode(P);if(ce!=null&&ce._meta){const j=ce.state;j.autoRate??(j.autoRate=1),Q&&(g==null||g(j,(Date.now()-ce._meta.date)/1e3)),Object.assign(r,j)}else Object.assign(r,ce)}async function W(){const k=await Ce.encodeAsync({_meta:{date:Date.now()},state:r}),Q=(m==null?void 0:m())??{};return`${btoa(JSON.stringify({_version:1,_date:Date.now(),...Q}))}.${k}`}function V(k=o){var ce;const Q=localStorage[y(k)],P=((ce=Q==null?void 0:Q.split("."))==null?void 0:ce[0])??null;return!P||P===Q?{}:JSON.parse(atob(P))}async function te(){var k,Q;(Q=(k=navigator.clipboard)==null?void 0:k.writeText)==null||Q.call(k,await W()).then(()=>alert("Copied to clipboard")).catch(()=>alert("Export failed"))}function M(k){for(const Q of k)b[Q]=V(Q);w("save-info-updated",b)}return it(()=>{L()}),rt(()=>{clearInterval(ie)}),t.$$set=k=>{"state"in k&&n(0,r=k.state),"id"in k&&n(1,a=k.id),"prefix"in k&&n(2,c=k.prefix),"defaultState"in k&&n(3,u=k.defaultState),"autosaveInterval"in k&&n(4,d=k.autosaveInterval),"actionsaveInterval"in k&&n(5,f=k.actionsaveInterval),"metaFunction"in k&&n(6,m=k.metaFunction),"offlineFunction"in k&&n(7,g=k.offlineFunction),"actionsaveEvents"in k&&n(8,_=k.actionsaveEvents),"backupEvents"in k&&n(9,p=k.backupEvents)},t.$$.update=()=>{t.$$.dirty&16&&Y(d)},[r,a,c,u,d,f,m,g,_,p]}class Sn extends ee{constructor(e){super(),x(this,e,Cn,null,$,{state:0,id:1,prefix:2,defaultState:3,autosaveInterval:4,actionsaveInterval:5,metaFunction:6,offlineFunction:7,actionsaveEvents:8,backupEvents:9})}}function Tn(t,e,n){w.on("command-set-setting",s);let{settings:o={colorBlind:!1}}=e;function s(l,i=o[l]){n(0,o[l]=i,o)}return t.$$set=l=>{"settings"in l&&n(0,o=l.settings)},[o]}class An extends ee{constructor(e){super(),x(this,e,Tn,null,$,{settings:0})}}const mt=["#CC0000","#00CC00","#CC7700","#7700CC","#0077CC","#000000"],In=["circle","square","hexagon","triangle","skew","diamond"],be={},On=[..."ABCDEFGHIJKLMNOPQRSTUVWXYZ"];On.forEach((t,e)=>{be[`C${t}`]={class:In[Math.floor(e/5)],color:e===25?mt[5]:mt[e%5],baseMax:5*2**e,text:t}});be.CA.seenAtStart=!0;function Mn(t,e,n){let o,s,l;const i=Object.keys(be);let{id:r}=e,{index:a=0}=e,{resource:c=d(r)}=e,{game:u}=e;w.on("command-advance",f),w.on("command-spend-resources",m),w.on("command-unlock-resource",g),w.on("command-boost-resource",p),w.on("command-toggle-autodonate",b),w.on("command-toggle-autoboost",O);function d(E){const y=be[E];return{id:E,max:y.baseMax,value:0,seen:y.seenAtStart,time:null,available:!1,autoDonate:!1,autoBoost:!1}}function f(E){if(c.seen){if(n(0,c.boost=1,c),s&&n(0,c.boost*=1.5**l.filter(y=>{var h,D;return(D=(h=u==null?void 0:u.state)==null?void 0:h.resources)==null?void 0:D[y].available}).length,c),c.value>=c.max){r==="CA"&&c.max>o?c.autoBoost&&w("command-buy-upgrade",`boost${r}`):c.max<o&&c.autoDonate&&w("command-buy-upgrade",`donate${r}`);return}n(0,c.value+=E*c.boost,c),c.value>=c.max&&n(0,c.value=c.max,c),_()}}function m(E){E.includes(r)&&(n(0,c.value=0,c),_())}function g(E){E===r&&(n(0,c.seen=!0,c),_())}function _(){n(0,c.available=c.value>=c.max,c),n(0,c.time=c.available?null:c.max-c.value,c)}function p(E,y){E===r&&(n(0,c.max/=y,c),n(0,c.value/=y,c))}function b(E){E===r&&n(0,c.autoDonate=!c.autoDonate,c)}function O(E){E===r&&n(0,c.autoBoost=!c.autoBoost,c)}return t.$$set=E=>{"id"in E&&n(1,r=E.id),"index"in E&&n(2,a=E.index),"resource"in E&&n(0,c=E.resource),"game"in E&&n(3,u=E.game)},t.$$.update=()=>{var E,y,h,D;t.$$.dirty&8&&(o=((E=u==null?void 0:u.state)==null?void 0:E.autoRate)??1),t.$$.dirty&10&&(s=(D=(h=(y=u==null?void 0:u.state)==null?void 0:y.upgrades)==null?void 0:h[`share${r}`])==null?void 0:D.owned),t.$$.dirty&4&&(l=i.slice(0,a))},[c,r,a,u]}class Un extends ee{constructor(e){super(),x(this,e,Mn,null,$,{id:1,index:2,resource:0,game:3})}}function gt(t,e,n){const o=t.slice();return o[4]=e[n],o[5]=e,o[6]=n,o}function _t(t){let e,n,o;function s(i){t[3](i,t[4])}let l={game:t[1],id:t[4],index:t[6]};return t[0][t[4]]!==void 0&&(l.resource=t[0][t[4]]),e=new Un({props:l}),de.push(()=>we(e,"resource",s)),{c(){Z(e.$$.fragment)},m(i,r){K(e,i,r),o=!0},p(i,r){t=i;const a={};r&2&&(a.game=t[1]),!n&&r&5&&(n=!0,a.resource=t[0][t[4]],ke(()=>n=!1)),e.$set(a)},i(i){o||(I(e.$$.fragment,i),o=!0)},o(i){U(e.$$.fragment,i),o=!1},d(i){J(e,i)}}}function Rn(t){let e,n,o=t[2],s=[];for(let i=0;i<o.length;i+=1)s[i]=_t(gt(t,o,i));const l=i=>U(s[i],1,1,()=>{s[i]=null});return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=ae()},m(i,r){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(i,r);T(i,e,r),n=!0},p(i,[r]){if(r&7){o=i[2];let a;for(a=0;a<o.length;a+=1){const c=gt(i,o,a);s[a]?(s[a].p(c,r),I(s[a],1)):(s[a]=_t(c),s[a].c(),I(s[a],1),s[a].m(e.parentNode,e))}for(he(),a=o.length;a<s.length;a+=1)l(a);ve()}},i(i){if(!n){for(let r=0;r<o.length;r+=1)I(s[r]);n=!0}},o(i){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)U(s[r]);n=!1},d(i){Ee(s,i),i&&S(e)}}}function Fn(t,e,n){let{resources:o={}}=e,{game:s}=e;const l=Object.keys(be);function i(r,a){t.$$.not_equal(o[a],r)&&(o[a]=r,n(0,o))}return t.$$set=r=>{"resources"in r&&n(0,o=r.resources),"game"in r&&n(1,s=r.game)},[o,s,l,i]}class Ln extends ee{constructor(e){super(),x(this,e,Fn,Rn,$,{resources:0,game:1})}}const oe=Object.keys(be),se={win:{cost:oe,effect:["command-win"],description:"Win the game",repeatable:!0}};oe.forEach((t,e)=>{e>0&&(se[`unlock${t}`]={cost:oe.slice(0,e).slice(-7),effect:["command-unlock-resource",t],description:`Unlock ~${t}~`})});se.boostCA={cost:["CA"],effect:["command-boost-resource","CA",1.5],description:"Increase ~CA~ speed by 50%",repeatable:!0,autoUpgrade:"autoBoostCA",autoAction:["command-toggle-autoboost","CA"],autoText:"Activate if own time > %rate%",isAuto:["CA","autoBoost"]};oe.slice(5).forEach((t,e)=>{se[`share${t}`]={cost:oe.slice(0,e+5).slice(-4),targets:[t],description:`Boost ~${t}~ by 50% for each full resource before it`}});oe.slice(1).forEach((t,e)=>{se[`boost${t}`]={cost:oe.slice(0,e+1).slice(-7),effect:["command-boost-resource",t,Math.floor(e/2)+2],description:`Make ~${t}~ ${Math.floor(e/2)+2} times faster`}});se.autoBoostCA={cost:["CC","CD","CE"],targets:["CA"],description:"Unlock ~CA~ boost automation"};oe.slice(5,20).forEach((t,e)=>{const n=oe[e];se[`autoDonate${n}`]={cost:[...oe.slice(0,e+6-Math.floor(e/5)*2).slice(-3),oe[10+Math.floor(e/5)*3]],targets:[n],description:`Unlock ~${n}~ donation automation`}});oe.slice(15,25).forEach((t,e)=>{const n=oe[e+15];se[`autoDonate${n}`]={cost:oe.slice(0,e+17).slice(-3),targets:[n],description:`Unlock ~${n}~ donation automation`}});oe.slice(15).forEach((t,e)=>{se[`rate${t}`]={cost:oe.slice(0,e+15).slice(-5),effect:["command-boost-automation",2],description:"Double automation rate"}});oe.forEach((t,e)=>{if(e>0){const n=oe[e-1],o=.5-Math.floor(e/5)*.02,s=.5+Math.floor(e/5)*.02;se[`donate${n}`]={cost:[n],effects:[["command-boost-resource",n,1-o],["command-boost-resource",t,1+s]],description:`Reduce ~${n}~ speed by ${(o*100).toFixed(0)}% to increase ~${t}~ speed by ${(s*100).toFixed(0)}%`,autoUpgrade:`autoDonate${n}`,autoAction:["command-toggle-autodonate",n],autoText:"Activate if own time < %rate%",isAuto:[n,"autoDonate"],repeatable:!0}}for(let n=0;n<e;n++){const o=oe[n],s=e-n+1;se[`boost${o}_${t}`]={cost:[o,t],effect:["command-boost-resource",o,s],description:`Make ~${o}~ ${s} times faster`}}});const Dn=["command-boost-resource"];for(const t of Object.values(se)){const e=new Set(t.targets),n=[...t.effects??[],t.effect??[]];for(const o of n)Dn.includes(o[0])&&e.add(o[1]);t.targets=[...e]}function jn(t,e,n){let o,{id:s}=e;w.on("command-buy-upgrade",i);let{upgrade:l={id:s,owned:!1}}=e;function i(r){if(r===s&&(w("command-spend-resources",o.cost),n(0,l.owned=!0,l),o.effect&&w(...o.effect),o.effects))for(const a of o.effects)w(...a)}return t.$$set=r=>{"id"in r&&n(1,s=r.id),"upgrade"in r&&n(0,l=r.upgrade)},t.$$.update=()=>{t.$$.dirty&2&&(o=se[s])},[l,s]}class Pn extends ee{constructor(e){super(),x(this,e,jn,null,$,{id:1,upgrade:0})}}function pt(t,e,n){const o=t.slice();return o[3]=e[n],o[4]=e,o[5]=n,o}function ht(t){let e,n,o;function s(i){t[2](i,t[3])}let l={id:t[3]};return t[0][t[3]]!==void 0&&(l.upgrade=t[0][t[3]]),e=new Pn({props:l}),de.push(()=>we(e,"upgrade",s)),{c(){Z(e.$$.fragment)},m(i,r){K(e,i,r),o=!0},p(i,r){t=i;const a={};!n&&r&3&&(n=!0,a.upgrade=t[0][t[3]],ke(()=>n=!1)),e.$set(a)},i(i){o||(I(e.$$.fragment,i),o=!0)},o(i){U(e.$$.fragment,i),o=!1},d(i){J(e,i)}}}function Nn(t){let e,n,o=t[1],s=[];for(let i=0;i<o.length;i+=1)s[i]=ht(pt(t,o,i));const l=i=>U(s[i],1,1,()=>{s[i]=null});return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=ae()},m(i,r){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(i,r);T(i,e,r),n=!0},p(i,[r]){if(r&3){o=i[1];let a;for(a=0;a<o.length;a+=1){const c=pt(i,o,a);s[a]?(s[a].p(c,r),I(s[a],1)):(s[a]=ht(c),s[a].c(),I(s[a],1),s[a].m(e.parentNode,e))}for(he(),a=o.length;a<s.length;a+=1)l(a);ve()}},i(i){if(!n){for(let r=0;r<o.length;r+=1)I(s[r]);n=!0}},o(i){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)U(s[r]);n=!1},d(i){Ee(s,i),i&&S(e)}}}function Hn(t,e,n){const o=Object.keys(se);let{upgrades:s={}}=e;function l(i,r){t.$$.not_equal(s[r],i)&&(s[r]=i,n(0,s))}return t.$$set=i=>{"upgrades"in i&&n(0,s=i.upgrades)},[s,o,l]}class Bn extends ee{constructor(e){super(),x(this,e,Hn,Nn,$,{upgrades:0})}}function vt(){return{cost:{},target:{},special:{}}}function Gn(t,e,n){w.on("command-toggle-filter",s),w.on("command-reset-filters",l);let{filters:o=vt()}=e;function s(i,r,a=1){const c=o[i];c&&(c[r]=(c[r]??0)+a,c[r]>1&&(c[r]=-1),c[r]<-1&&(c[r]=1),c._required=Object.keys(c).filter(u=>c[u]===1),w("upgrade-filters-updated"))}function l(i=null){if(i===null){n(0,o=vt());return}n(0,o[i]={},o)}return t.$$set=i=>{"filters"in i&&n(0,o=i.filters)},[o]}class qn extends ee{constructor(e){super(),x(this,e,Gn,null,$,{filters:0})}}function bt(t){let e,n,o,s,l,i,r,a,c,u,d,f;function m(h){t[7](h)}let g={game:t[0]};t[1].resources!==void 0&&(g.resources=t[1].resources),e=new Ln({props:g}),de.push(()=>we(e,"resources",m));function _(h){t[8](h)}let p={};t[1].upgrades!==void 0&&(p.upgrades=t[1].upgrades),s=new Bn({props:p}),de.push(()=>we(s,"upgrades",_));function b(h){t[9](h)}let O={};t[1].upgradeFilters!==void 0&&(O.filters=t[1].upgradeFilters),r=new qn({props:O}),de.push(()=>we(r,"filters",b));function E(h){t[10](h)}let y={};return t[1].settings!==void 0&&(y.settings=t[1].settings),u=new An({props:y}),de.push(()=>we(u,"settings",E)),{c(){Z(e.$$.fragment),o=F(),Z(s.$$.fragment),i=F(),Z(r.$$.fragment),c=F(),Z(u.$$.fragment)},m(h,D){K(e,h,D),T(h,o,D),K(s,h,D),T(h,i,D),K(r,h,D),T(h,c,D),K(u,h,D),f=!0},p(h,D){const H={};D&1&&(H.game=h[0]),!n&&D&2&&(n=!0,H.resources=h[1].resources,ke(()=>n=!1)),e.$set(H);const L={};!l&&D&2&&(l=!0,L.upgrades=h[1].upgrades,ke(()=>l=!1)),s.$set(L);const X={};!a&&D&2&&(a=!0,X.filters=h[1].upgradeFilters,ke(()=>a=!1)),r.$set(X);const ie={};!d&&D&2&&(d=!0,ie.settings=h[1].settings,ke(()=>d=!1)),u.$set(ie)},i(h){f||(I(e.$$.fragment,h),I(s.$$.fragment,h),I(r.$$.fragment,h),I(u.$$.fragment,h),f=!0)},o(h){U(e.$$.fragment,h),U(s.$$.fragment,h),U(r.$$.fragment,h),U(u.$$.fragment,h),f=!1},d(h){J(e,h),h&&S(o),J(s,h),h&&S(i),J(r,h),h&&S(c),J(u,h)}}}function yt(t){let e,n,o=t[1]&&bt(t);return{c(){o&&o.c(),e=ae()},m(s,l){o&&o.m(s,l),T(s,e,l),n=!0},p(s,l){s[1]?o?(o.p(s,l),l&2&&I(o,1)):(o=bt(s),o.c(),I(o,1),o.m(e.parentNode,e)):o&&(he(),U(o,1,1,()=>{o=null}),ve())},i(s){n||(I(o),n=!0)},o(s){U(o),n=!1},d(s){o&&o.d(s),s&&S(e)}}}function Vn(t){let e,n,o,s,l=t[2],i,r;function a(f){t[5](f)}function c(f){t[6](f)}let u={defaultState:t[3],metaFunction:t[4],offlineFunction:Qn,actionsaveEvents:["command-buy-upgrade"],backupEvents:[],autosaveInterval:15e3,actionsaveInterval:2e3,prefix:"Boolean_Game"};t[1]!==void 0&&(u.state=t[1]),t[2]!==void 0&&(u.id=t[2]),e=new Sn({props:u}),de.push(()=>we(e,"state",a)),de.push(()=>we(e,"id",c));let d=yt(t);return{c(){Z(e.$$.fragment),s=F(),d.c(),i=ae()},m(f,m){K(e,f,m),T(f,s,m),d.m(f,m),T(f,i,m),r=!0},p(f,[m]){const g={};!n&&m&2&&(n=!0,g.state=f[1],ke(()=>n=!1)),!o&&m&4&&(o=!0,g.id=f[2],ke(()=>o=!1)),e.$set(g),m&4&&$(l,l=f[2])?(he(),U(d,1,1,le),ve(),d=yt(f),d.c(),I(d,1),d.m(i.parentNode,i)):d.p(f,m)},i(f){r||(I(e.$$.fragment,f),I(d),r=!0)},o(f){U(e.$$.fragment,f),U(d),r=!1},d(f){J(e,f),f&&S(s),f&&S(i),d.d(f)}}}const kt=1e4;function Qn(t,e){return t.targetTime+=e,t}function Wn(t,e,n){const o=Object.freeze({time:0,targetTime:0,autoRate:1}),s=kt;let{game:l={}}=e,i,r;w.on("command-tick",u),w.on("command-win",d),w.on("command-continue-game",f),w.on("command-boost-automation",a);function a(y){n(1,i.autoRate/=y,i)}function c(){return Object.values(i.resources).map(h=>h.time??1/0)}function u(y){n(1,i.targetTime+=y,i);let h=Math.min(i.targetTime-i.time,kt);for(;h>0;){const D=c(),H=Math.min(h,s,...D);w("command-advance",H),n(1,i.time+=H,i),h-=H}}function d(){n(1,i.continues=i.won??0,i),n(1,i.won=i.continues+1,i),n(1,i.lastWinTime=i.time,i)}function f(){n(1,i.continues+=1,i)}function m(){return{resources:Object.keys(be).filter(y=>{var h,D,H;return(H=(D=(h=l==null?void 0:l.state)==null?void 0:h.resources)==null?void 0:D[y])==null?void 0:H.seen}).length}}function g(y){i=y,n(1,i)}function _(y){r=y,n(2,r)}function p(y){t.$$.not_equal(i.resources,y)&&(i.resources=y,n(1,i))}function b(y){t.$$.not_equal(i.upgrades,y)&&(i.upgrades=y,n(1,i))}function O(y){t.$$.not_equal(i.upgradeFilters,y)&&(i.upgradeFilters=y,n(1,i))}function E(y){t.$$.not_equal(i.settings,y)&&(i.settings=y,n(1,i))}return t.$$set=y=>{"game"in y&&n(0,l=y.game)},t.$$.update=()=>{t.$$.dirty&2&&n(0,l.state=i,l),t.$$.dirty&4&&n(0,l.id=r,l)},[l,i,r,o,m,g,_,p,b,O,E]}class Yn extends ee{constructor(e){super(),x(this,e,Wn,Vn,$,{game:0})}}function ue(t){if(t<60)return t.toFixed(1)+"s";{const e=t%60|0,n=t/60%60|0,o=t/3600|0;return(o>100?`${o}:${n}`:`${o}:${n}:${e}`).replace(/:(\d)(?=:|$)/g,":0$1").replace(/^(00?:)*0?/g,"")}}function wt(t){let e;function n(l,i){return l[0].resource?Jn:Kn}let o=n(t),s=o(t);return{c(){e=A("div"),s.c(),C(e,"class","hover svelte-10x1l7s"),C(e,"style",t[1])},m(l,i){T(l,e,i),s.m(e,null)},p(l,i){o===(o=n(l))&&s?s.p(l,i):(s.d(1),s=o(l),s&&(s.c(),s.m(e,null))),i&2&&C(e,"style",l[1])},d(l){l&&S(e),s.d()}}}function Kn(t){let e=(t[0]??"I'm in loss.")+"",n;return{c(){n=q(e)},m(o,s){T(o,n,s)},p(o,s){s&1&&e!==(e=(o[0]??"I'm in loss.")+"")&&fe(n,e)},d(o){o&&S(n)}}}function Jn(t){let e;function n(l,i){return l[2].value<l[2].max?zn:Xn}let o=n(t),s=o(t);return{c(){s.c(),e=ae()},m(l,i){s.m(l,i),T(l,e,i)},p(l,i){o===(o=n(l))&&s?s.p(l,i):(s.d(1),s=o(l),s&&(s.c(),s.m(e.parentNode,e)))},d(l){s.d(l),l&&S(e)}}}function Xn(t){let e,n=ue(t[2].max/t[2].boost)+"",o;return{c(){e=q("You have it! / "),o=q(n)},m(s,l){T(s,e,l),T(s,o,l)},p(s,l){l&4&&n!==(n=ue(s[2].max/s[2].boost)+"")&&fe(o,n)},d(s){s&&S(e),s&&S(o)}}}function zn(t){let e,n=ue((t[2].max-t[2].value)/t[2].boost)+"",o,s,l=ue(t[2].max/t[2].boost)+"",i;return{c(){e=q("ETA: "),o=q(n),s=q(" / "),i=q(l)},m(r,a){T(r,e,a),T(r,o,a),T(r,s,a),T(r,i,a)},p(r,a){a&4&&n!==(n=ue((r[2].max-r[2].value)/r[2].boost)+"")&&fe(o,n),a&4&&l!==(l=ue(r[2].max/r[2].boost)+"")&&fe(i,l)},d(r){r&&S(e),r&&S(o),r&&S(s),r&&S(i)}}}function Zn(t){let e,n=t[0]&&!t[3]&&wt(t);return{c(){n&&n.c(),e=ae()},m(o,s){n&&n.m(o,s),T(o,e,s)},p(o,[s]){o[0]&&!o[3]?n?n.p(o,s):(n=wt(o),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:le,o:le,d(o){n&&n.d(o),o&&S(e)}}}function $n(t,e,n){let o,s,l,{game:i}=e;w.on("command-reset-hover",f),w.on("command-set-hover",d);let r=null,a=0,c=0,u=null;function d(m,g,_){clearTimeout(u),u=setTimeout(()=>{clearTimeout(u),n(0,r=m),n(5,a=g),n(6,c=_)},500)}function f(m){clearTimeout(u),m===r&&n(0,r=null)}return t.$$set=m=>{"game"in m&&n(4,i=m.game)},t.$$.update=()=>{var m,g;t.$$.dirty&1&&n(3,o=r==null?void 0:r.hidden),t.$$.dirty&17&&n(2,s=(g=(m=i==null?void 0:i.state)==null?void 0:m.resources)==null?void 0:g[r==null?void 0:r.resource]),t.$$.dirty&96&&n(1,l=`        --hover-x:${a+12}px;        --hover-y:${c+2}px;        --translate-x:${a>window.innerWidth/2?"calc(-100% - 15px)":"0"};        --translate-y:${c>window.innerHeight/2?"calc(-100% + 20px)":"0"};    `)},[r,l,s,o,i,a,c]}class xn extends ee{constructor(e){super(),x(this,e,$n,Zn,$,{game:4})}}function lt(t,e={}){const n=i=>{w("command-set-hover",e,i.clientX,i.clientY),s(i)},o=i=>{w("command-reset-hover",e),s(i)},s=i=>{i.preventDefault(),i.stopPropagation()},l={mousemove:n,mouseleave:o,mouseout:o};for(let[i,r]of Object.entries(l))t.addEventListener(i,r,!0);return{destroy(){for(let[i,r]of Object.entries(l))t.removeEventListener(i,r,!0)}}}function Et(t){let e,n,o,s,l,i=t[1].text+"",r,a,c,u,d,f,m;return{c(){e=A("div"),n=A("div"),s=F(),l=A("div"),r=q(i),a=F(),c=A("div"),C(n,"class",o="bar layer "+t[1].class+" svelte-g7x8d0"),C(l,"class","icon-text layer svelte-g7x8d0"),C(c,"class",u="fade layer "+t[1].class+" svelte-g7x8d0"),C(e,"class","resource svelte-g7x8d0"),C(e,"style",t[2]),ye(e,"available",t[3])},m(g,_){T(g,e,_),v(e,n),v(e,s),v(e,l),v(l,r),v(e,a),v(e,c),f||(m=ne(d=lt.call(null,e,{resource:t[0]})),f=!0)},p(g,_){_&2&&o!==(o="bar layer "+g[1].class+" svelte-g7x8d0")&&C(n,"class",o),_&2&&i!==(i=g[1].text+"")&&fe(r,i),_&2&&u!==(u="fade layer "+g[1].class+" svelte-g7x8d0")&&C(c,"class",u),_&4&&C(e,"style",g[2]),d&&Fe(d.update)&&_&1&&d.update.call(null,{resource:g[0]}),_&8&&ye(e,"available",g[3])},d(g){g&&S(e),f=!1,m()}}}function eo(t){let e,n=t[4]&&Et(t);return{c(){n&&n.c(),e=ae()},m(o,s){n&&n.m(o,s),T(o,e,s)},p(o,[s]){o[4]?n?n.p(o,s):(n=Et(o),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:le,o:le,d(o){n&&n.d(o),o&&S(e)}}}function to(t,e,n){let o,s,l,i,r,a,{game:c}=e,{id:u}=e;return t.$$set=d=>{"game"in d&&n(5,c=d.game),"id"in d&&n(0,u=d.id)},t.$$.update=()=>{var d,f;t.$$.dirty&1&&n(1,o=be[u]??{}),t.$$.dirty&33&&n(7,s=((f=(d=c==null?void 0:c.state)==null?void 0:d.resources)==null?void 0:f[u])??{}),t.$$.dirty&128&&n(4,l=s.seen),t.$$.dirty&128&&n(6,i=s.value/s.max),t.$$.dirty&128&&n(3,r=s.available),t.$$.dirty&66&&n(2,a=`
        --bar-color: ${o.color??"#777777"};
        --bar-progress: ${i*100}%;
    `)},[u,o,a,r,l,c,i,s]}class no extends ee{constructor(e){super(),x(this,e,to,eo,$,{game:5,id:0})}}function Ct(t,e,n){const o=t.slice();return o[2]=e[n],o}function St(t){let e,n;return e=new no({props:{game:t[0],id:t[2]}}),{c(){Z(e.$$.fragment)},m(o,s){K(e,o,s),n=!0},p(o,s){const l={};s&1&&(l.game=o[0]),e.$set(l)},i(o){n||(I(e.$$.fragment,o),n=!0)},o(o){U(e.$$.fragment,o),n=!1},d(o){J(e,o)}}}function oo(t){let e,n,o=t[1],s=[];for(let i=0;i<o.length;i+=1)s[i]=St(Ct(t,o,i));const l=i=>U(s[i],1,1,()=>{s[i]=null});return{c(){e=A("div");for(let i=0;i<s.length;i+=1)s[i].c();C(e,"class","list svelte-62uor0")},m(i,r){T(i,e,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);n=!0},p(i,[r]){if(r&3){o=i[1];let a;for(a=0;a<o.length;a+=1){const c=Ct(i,o,a);s[a]?(s[a].p(c,r),I(s[a],1)):(s[a]=St(c),s[a].c(),I(s[a],1),s[a].m(e,null))}for(he(),a=o.length;a<s.length;a+=1)l(a);ve()}},i(i){if(!n){for(let r=0;r<o.length;r+=1)I(s[r]);n=!0}},o(i){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)U(s[r]);n=!1},d(i){i&&S(e),Ee(s,i)}}}function so(t,e,n){let{game:o}=e;const s=Object.keys(be);return t.$$set=l=>{"game"in l&&n(0,o=l.game)},[o,s]}class io extends ee{constructor(e){super(),x(this,e,so,oo,$,{game:0})}}function re(t){const e=()=>{t.dispatchEvent(new CustomEvent("basicaction"))},n=()=>{t.dispatchEvent(new CustomEvent("specialaction"))},o=()=>{t.dispatchEvent(new CustomEvent("debugaction"))},s=()=>{t.dispatchEvent(new CustomEvent("enter"))},l=()=>{t.dispatchEvent(new CustomEvent("leave"))},i=m=>{m.button||(m.shiftKey?n():e(),u(m))},r=m=>{m.shiftKey,n(),u(m)},a=m=>{m.target===t&&s()},c=m=>{m.target===t&&l()},u=m=>{m.preventDefault(),m.stopPropagation()},f={keyup:()=>{},mouseup:i,mouseenter:a,mouseleave:c,contextmenu:r};for(let[m,g]of Object.entries(f))t.addEventListener(m,g,!0);return{destroy(){for(let[m,g]of Object.entries(f))t.removeEventListener(m,g,!0)}}}function ro(t,e){const n=be[e]??"",o=`
        --icon-color : ${n.color??"#777777"};
    `;return`<span class="${n.class} icon" style="${o}">${n.text}</span>`}function Re(t){return t.replace(/~(.*?)~/g,ro)}function Tt(t){let e,n,o,s,l,i,r,a,c,u=t[2]&&At(),d=t[0]&&It(t);return{c(){e=A("div"),u&&u.c(),n=F(),d&&d.c(),o=F(),s=A("div"),l=F(),i=A("div"),r=A("div"),C(s,"class","cost line svelte-3sbd7n"),C(r,"class","text svelte-3sbd7n"),C(i,"class","description line svelte-3sbd7n"),C(e,"class","upgrade svelte-3sbd7n"),ye(e,"available",t[5])},m(f,m){T(f,e,m),u&&u.m(e,null),v(e,n),d&&d.m(e,null),v(e,o),v(e,s),s.innerHTML=t[4],v(e,l),v(e,i),v(i,r),r.innerHTML=t[3],a||(c=[ne(re.call(null,s)),z(s,"basicaction",function(){Fe(t[0]?t[9]:t[8])&&(t[0]?t[9]:t[8]).apply(this,arguments)}),z(s,"specialaction",t[9]),ne(re.call(null,i)),z(i,"basicaction",t[8]),z(i,"specialaction",t[9])],a=!0)},p(f,m){t=f,t[2]?u||(u=At(),u.c(),u.m(e,n)):u&&(u.d(1),u=null),t[0]?d?d.p(t,m):(d=It(t),d.c(),d.m(e,o)):d&&(d.d(1),d=null),m&16&&(s.innerHTML=t[4]),m&8&&(r.innerHTML=t[3]),m&32&&ye(e,"available",t[5])},d(f){f&&S(e),u&&u.d(),d&&d.d(),a=!1,me(c)}}}function At(t){let e,n,o;return{c(){e=A("div"),e.textContent="⟳",C(e,"class","left corner svelte-3sbd7n")},m(s,l){T(s,e,l),n||(o=ne(lt.call(null,e,`Repeatable

Can be bought multiple times`)),n=!0)},d(s){s&&S(e),n=!1,o()}}}function It(t){let e=t[6],n,o=Ot(t);return{c(){o.c(),n=ae()},m(s,l){o.m(s,l),T(s,n,l)},p(s,l){l&64&&$(e,e=s[6])?(o.d(1),o=Ot(s),o.c(),o.m(n.parentNode,n)):o.p(s,l)},d(s){s&&S(n),o.d(s)}}}function lo(t){let e;return{c(){e=q("OFF")},m(n,o){T(n,e,o)},d(n){n&&S(e)}}}function ao(t){let e;return{c(){e=q("ON")},m(n,o){T(n,e,o)},d(n){n&&S(e)}}}function Ot(t){let e,n,o,s;function l(a,c){return a[7]?ao:lo}let i=l(t),r=i(t);return{c(){e=A("div"),r.c(),C(e,"class","right corner svelte-3sbd7n")},m(a,c){T(a,e,c),r.m(e,null),o||(s=[ne(n=lt.call(null,e,`Automatable

Click header or right-click
to toggle automation:
${t[6]}`)),ne(re.call(null,e)),z(e,"basicaction",t[9])],o=!0)},p(a,c){i!==(i=l(a))&&(r.d(1),r=i(a),r&&(r.c(),r.m(e,null))),n&&Fe(n.update)&&c&64&&n.update.call(null,`Automatable

Click header or right-click
to toggle automation:
${a[6]}`)},d(a){a&&S(e),r.d(),o=!1,me(s)}}}function co(t){let e,n=t[1]&&Tt(t);return{c(){n&&n.c(),e=ae()},m(o,s){n&&n.m(o,s),T(o,e,s)},p(o,[s]){o[1]?n?n.p(o,s):(n=Tt(o),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:le,o:le,d(o){n&&n.d(o),o&&S(e)}}}function uo(t,e,n){let o,s,l,i,r,a,c,u,d,f,m,g,_,p,b,O,E,y,h,D,H,L,X,ie,Y,{game:G}=e,{id:W}=e;function V(){y&&w("command-buy-upgrade",W)}function te(){H===null||!h||w(...H)}return t.$$set=M=>{"game"in M&&n(10,G=M.game),"id"in M&&n(11,W=M.id)},t.$$.update=()=>{var M,k,Q,P,ce,R,j;t.$$.dirty&2048&&n(12,o=se[W]??{}),t.$$.dirty&1024&&n(16,s=((M=G==null?void 0:G.state)==null?void 0:M.upgrades)??{}),t.$$.dirty&1024&&n(15,l=((k=G==null?void 0:G.state)==null?void 0:k.resources)??{}),t.$$.dirty&1024&&n(27,i=((Q=G==null?void 0:G.state)==null?void 0:Q.upgradeFilters)??{}),t.$$.dirty&134217728&&n(26,r=i.cost??{}),t.$$.dirty&134217728&&n(24,a=i.target??{}),t.$$.dirty&134217728&&n(23,c=i.special??{}),t.$$.dirty&67584&&n(19,u=s[W]??{}),t.$$.dirty&4096&&n(13,d=o.cost??[]),t.$$.dirty&4096&&n(25,f=o.targets??[]),t.$$.dirty&4096&&n(2,m=o.repeatable),t.$$.dirty&33595392&&n(18,g=d.every(N=>{var ge;return(ge=l[N])==null?void 0:ge.seen})&&f.every(N=>{var ge;return(ge=l[N])==null?void 0:ge.seen})),t.$$.dirty&67117056&&n(22,_=(r._required??[]).every(N=>d.includes(N))&&!d.some(N=>r[N]===-1)),t.$$.dirty&50331648&&n(21,p=(a._required??[]).every(N=>f.includes(N))&&!f.some(N=>a[N]===-1)),t.$$.dirty&8388612&&n(20,b=!c.repeatable||c.repeatable===1&&m||c.repeatable===-1&&!m),t.$$.dirty&7340032&&n(17,O=_&&p&&b),t.$$.dirty&917508&&n(1,E=(!u.owned||m)&&g&&O),t.$$.dirty&40962&&n(5,y=E&&d.every(N=>{var ge;return(ge=l[N])==null?void 0:ge.available})),t.$$.dirty&69632&&n(0,h=o.autoUpgrade&&((P=s[o.autoUpgrade])==null?void 0:P.owned)),t.$$.dirty&36865&&n(7,D=o.isAuto&&h&&l[o.isAuto[0]][o.isAuto[1]]),t.$$.dirty&4096&&(H=o.autoAction??null),t.$$.dirty&1024&&n(14,L=((ce=G==null?void 0:G.state)==null?void 0:ce.autoRate)??1),t.$$.dirty&20480&&n(6,X=((j=(R=o==null?void 0:o.autoText)==null?void 0:R.replace)==null?void 0:j.call(R,"%rate%",`${L.toFixed(2)}s`))??""),t.$$.dirty&8192&&n(4,ie=d.length?d.length===26?"EVERYTHING":Re(`~${d.join("~ ~")}~`):"FREE"),t.$$.dirty&4096&&n(3,Y=Re(o.description))},[h,E,m,Y,ie,y,X,D,V,te,G,W,o,d,L,l,s,O,g,u,b,p,_,c,a,f,r,i]}class fo extends ee{constructor(e){super(),x(this,e,uo,co,$,{game:10,id:11})}}function mo(t){let e,n,o,s,l,i;const r=t[10].default,a=Qt(r,t,t[9],null);return{c(){e=A("div"),a&&a.c(),n=F(),o=A("div"),C(o,"class","cross svelte-142lgse"),C(e,"class","item svelte-142lgse"),ye(e,"present",t[1]),ye(e,"absent",t[0])},m(c,u){T(c,e,u),a&&a.m(e,null),v(e,n),v(e,o),s=!0,l||(i=[ne(re.call(null,e)),z(e,"basicaction",t[2]),z(e,"specialaction",t[3])],l=!0)},p(c,[u]){a&&a.p&&(!s||u&512)&&Kt(a,r,c,c[9],s?Yt(r,c[9],u,null):Jt(c[9]),null),(!s||u&2)&&ye(e,"present",c[1]),(!s||u&1)&&ye(e,"absent",c[0])},i(c){s||(I(a,c),s=!0)},o(c){U(a,c),s=!1},d(c){c&&S(e),a&&a.d(c),l=!1,me(i)}}}function go(t,e,n){let o,s,l,i,{$$slots:r={},$$scope:a}=e,{id:c}=e,{type:u}=e,{game:d}=e;function f(){w("command-toggle-filter",u,c,1)}function m(){w("command-toggle-filter",u,c,-1)}return t.$$set=g=>{"id"in g&&n(4,c=g.id),"type"in g&&n(5,u=g.type),"game"in g&&n(6,d=g.game),"$$scope"in g&&n(9,a=g.$$scope)},t.$$.update=()=>{var g,_;t.$$.dirty&64&&n(8,o=((g=d==null?void 0:d.state)==null?void 0:g.upgradeFilters)??{}),t.$$.dirty&304&&n(7,s=((_=o[u])==null?void 0:_[c])??0),t.$$.dirty&128&&n(1,l=s===1),t.$$.dirty&128&&n(0,i=s===-1)},[i,l,f,m,c,u,d,s,o,a,r]}class at extends ee{constructor(e){super(),x(this,e,go,mo,$,{id:4,type:5,game:6})}}function Mt(t,e,n){const o=t.slice();return o[12]=e[n],o}function Ut(t,e,n){const o=t.slice();return o[12]=e[n],o}function _o(t){let e,n=Re(`~${t[12]}~`)+"",o;return{c(){e=new Xt(!1),o=ae(),e.a=o},m(s,l){e.m(n,s,l),T(s,o,l)},p(s,l){l&4&&n!==(n=Re(`~${s[12]}~`)+"")&&e.p(n)},d(s){s&&S(o),s&&e.d()}}}function Rt(t){let e,n;return e=new at({props:{game:t[0],id:t[12],type:"cost",$$slots:{default:[_o]},$$scope:{ctx:t}}}),{c(){Z(e.$$.fragment)},m(o,s){K(e,o,s),n=!0},p(o,s){const l={};s&1&&(l.game=o[0]),s&4&&(l.id=o[12]),s&131076&&(l.$$scope={dirty:s,ctx:o}),e.$set(l)},i(o){n||(I(e.$$.fragment,o),n=!0)},o(o){U(e.$$.fragment,o),n=!1},d(o){J(e,o)}}}function po(t){let e,n=Re(`~${t[12]}~`)+"",o;return{c(){e=new Xt(!1),o=ae(),e.a=o},m(s,l){e.m(n,s,l),T(s,o,l)},p(s,l){l&4&&n!==(n=Re(`~${s[12]}~`)+"")&&e.p(n)},d(s){s&&S(o),s&&e.d()}}}function Ft(t){let e,n;return e=new at({props:{game:t[0],id:t[12],type:"target",$$slots:{default:[po]},$$scope:{ctx:t}}}),{c(){Z(e.$$.fragment)},m(o,s){K(e,o,s),n=!0},p(o,s){const l={};s&1&&(l.game=o[0]),s&4&&(l.id=o[12]),s&131076&&(l.$$scope={dirty:s,ctx:o}),e.$set(l)},i(o){n||(I(e.$$.fragment,o),n=!0)},o(o){U(e.$$.fragment,o),n=!1},d(o){J(e,o)}}}function ho(t){let e;return{c(){e=A("span"),e.textContent="⟳",C(e,"class","icon circle svelte-yvxhr5")},m(n,o){T(n,e,o)},p:le,d(n){n&&S(e)}}}function vo(t){let e,n,o,s,l,i,r,a,c,u,d,f,m,g,_,p,b,O,E,y,h,D,H,L,X,ie,Y,G,W,V,te=t[2],M=[];for(let R=0;R<te.length;R+=1)M[R]=Rt(Ut(t,te,R));const k=R=>U(M[R],1,1,()=>{M[R]=null});let Q=t[2],P=[];for(let R=0;R<Q.length;R+=1)P[R]=Ft(Mt(t,Q,R));const ce=R=>U(P[R],1,1,()=>{P[R]=null});return H=new at({props:{game:t[0],type:"special",id:"repeatable",$$slots:{default:[ho]},$$scope:{ctx:t}}}),{c(){var R,j;e=A("div"),n=A("div"),o=A("label"),s=A("input"),i=q("Display letters"),r=F(),a=A("div"),c=A("div"),c.textContent="Cost filter:",u=F();for(let N=0;N<M.length;N+=1)M[N].c();d=F(),f=A("div"),f.textContent="Reset",m=F(),g=A("div"),_=A("div"),_.textContent="Target filter:",p=F();for(let N=0;N<P.length;N+=1)P[N].c();b=F(),O=A("div"),O.textContent="Reset",E=F(),y=A("div"),h=A("div"),h.textContent="Special filter:",D=F(),Z(H.$$.fragment),L=F(),X=A("div"),X.textContent="Reset",ie=F(),Y=A("div"),Y.textContent="☰",C(s,"type","checkbox"),s.checked=l=(j=(R=t[0])==null?void 0:R.settings)==null?void 0:j.colorBlind,C(n,"class","settings"),C(c,"class","title"),C(f,"class","reset button svelte-yvxhr5"),C(a,"class","filter svelte-yvxhr5"),C(_,"class","title"),C(O,"class","reset button svelte-yvxhr5"),C(g,"class","filter svelte-yvxhr5"),C(h,"class","title"),C(X,"class","reset button svelte-yvxhr5"),C(y,"class","filter svelte-yvxhr5"),C(Y,"class","menu button svelte-yvxhr5"),C(e,"class","filters svelte-yvxhr5")},m(R,j){T(R,e,j),v(e,n),v(n,o),v(o,s),t[7](s),v(o,i),v(e,r),v(e,a),v(a,c),v(a,u);for(let N=0;N<M.length;N+=1)M[N]&&M[N].m(a,null);v(a,d),v(a,f),v(e,m),v(e,g),v(g,_),v(g,p);for(let N=0;N<P.length;N+=1)P[N]&&P[N].m(g,null);v(g,b),v(g,O),v(e,E),v(e,y),v(y,h),v(y,D),K(H,y,null),v(y,L),v(y,X),v(e,ie),v(e,Y),G=!0,W||(V=[z(s,"change",t[4]),ne(re.call(null,f)),z(f,"basicaction",t[8]),ne(re.call(null,O)),z(O,"basicaction",t[9]),ne(re.call(null,X)),z(X,"basicaction",t[10]),ne(re.call(null,Y)),z(Y,"basicaction",t[5])],W=!0)},p(R,[j]){var ge,ct;if((!G||j&1&&l!==(l=(ct=(ge=R[0])==null?void 0:ge.settings)==null?void 0:ct.colorBlind))&&(s.checked=l),j&5){te=R[2];let B;for(B=0;B<te.length;B+=1){const Le=Ut(R,te,B);M[B]?(M[B].p(Le,j),I(M[B],1)):(M[B]=Rt(Le),M[B].c(),I(M[B],1),M[B].m(a,d))}for(he(),B=te.length;B<M.length;B+=1)k(B);ve()}if(j&5){Q=R[2];let B;for(B=0;B<Q.length;B+=1){const Le=Mt(R,Q,B);P[B]?(P[B].p(Le,j),I(P[B],1)):(P[B]=Ft(Le),P[B].c(),I(P[B],1),P[B].m(g,b))}for(he(),B=Q.length;B<P.length;B+=1)ce(B);ve()}const N={};j&1&&(N.game=R[0]),j&131072&&(N.$$scope={dirty:j,ctx:R}),H.$set(N)},i(R){if(!G){for(let j=0;j<te.length;j+=1)I(M[j]);for(let j=0;j<Q.length;j+=1)I(P[j]);I(H.$$.fragment,R),G=!0}},o(R){M=M.filter(Boolean);for(let j=0;j<M.length;j+=1)U(M[j]);P=P.filter(Boolean);for(let j=0;j<P.length;j+=1)U(P[j]);U(H.$$.fragment,R),G=!1},d(R){R&&S(e),t[7](null),Ee(M,R),Ee(P,R),J(H),W=!1,me(V)}}}function bo(t,e,n){let o,s;const l=Object.keys(be);let{game:i}=e,r;function a(_){w("command-reset-filters",_)}function c(){w("command-set-setting","colorBlind",r.checked)}function u(){w("command-open-dialog","menu")}function d(_){de[_?"unshift":"push"](()=>{r=_,n(1,r)})}const f=()=>a("cost"),m=()=>a("target"),g=()=>a("special");return t.$$set=_=>{"game"in _&&n(0,i=_.game)},t.$$.update=()=>{var _;t.$$.dirty&1&&n(6,o=((_=i==null?void 0:i.state)==null?void 0:_.resources)??{}),t.$$.dirty&64&&n(2,s=l.filter(p=>{var b;return(b=o[p])==null?void 0:b.seen}))},[i,r,s,a,c,u,o,d,f,m,g]}class yo extends ee{constructor(e){super(),x(this,e,bo,vo,$,{game:0})}}function Lt(t,e,n){const o=t.slice();return o[2]=e[n],o}function Dt(t){let e,n;return e=new fo({props:{game:t[0],id:t[2]}}),{c(){Z(e.$$.fragment)},m(o,s){K(e,o,s),n=!0},p(o,s){const l={};s&1&&(l.game=o[0]),e.$set(l)},i(o){n||(I(e.$$.fragment,o),n=!0)},o(o){U(e.$$.fragment,o),n=!1},d(o){J(e,o)}}}function ko(t){let e,n,o,s,l;n=new yo({props:{game:t[0]}});let i=t[1],r=[];for(let c=0;c<i.length;c+=1)r[c]=Dt(Lt(t,i,c));const a=c=>U(r[c],1,1,()=>{r[c]=null});return{c(){e=A("div"),Z(n.$$.fragment),o=F(),s=A("div");for(let c=0;c<r.length;c+=1)r[c].c();C(s,"class","list svelte-1h8t3jd"),C(e,"class","container svelte-1h8t3jd")},m(c,u){T(c,e,u),K(n,e,null),v(e,o),v(e,s);for(let d=0;d<r.length;d+=1)r[d]&&r[d].m(s,null);l=!0},p(c,[u]){const d={};if(u&1&&(d.game=c[0]),n.$set(d),u&3){i=c[1];let f;for(f=0;f<i.length;f+=1){const m=Lt(c,i,f);r[f]?(r[f].p(m,u),I(r[f],1)):(r[f]=Dt(m),r[f].c(),I(r[f],1),r[f].m(s,null))}for(he(),f=i.length;f<r.length;f+=1)a(f);ve()}},i(c){if(!l){I(n.$$.fragment,c);for(let u=0;u<i.length;u+=1)I(r[u]);l=!0}},o(c){U(n.$$.fragment,c),r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)U(r[u]);l=!1},d(c){c&&S(e),J(n),Ee(r,c)}}}function wo(t,e,n){let{game:o}=e;const s=Object.keys(se).sort((l,i)=>se[l].repeatable?se[i].repeatable?0:-1:se[i].repeatable?1:0);return t.$$set=l=>{"game"in l&&n(0,o=l.game)},[o,s]}class Eo extends ee{constructor(e){super(),x(this,e,wo,ko,$,{game:0})}}function jt(t){let e,n,o,s,l,i,r,a,c,u=ue(t[2])+"",d,f,m,g,_,p,b;return{c(){e=A("div"),n=A("div"),o=A("div"),s=q("You won "),l=q(t[0]),i=q(" times!"),r=F(),a=A("div"),c=q("It took you "),d=q(u),f=F(),m=A("div"),m.textContent="Restart game",g=F(),_=A("div"),_.textContent="Keep playing",C(o,"class","title svelte-13s7att"),C(a,"class","time"),C(m,"class","button svelte-13s7att"),C(_,"class","button svelte-13s7att"),C(n,"class","dialog svelte-13s7att"),C(e,"class","holder svelte-13s7att")},m(O,E){T(O,e,E),v(e,n),v(n,o),v(o,s),v(o,l),v(o,i),v(n,r),v(n,a),v(a,c),v(a,d),v(n,f),v(n,m),v(n,g),v(n,_),p||(b=[ne(re.call(null,m)),z(m,"basicaction",t[3]),ne(re.call(null,_)),z(_,"basicaction",t[4])],p=!0)},p(O,E){E&1&&fe(l,O[0]),E&4&&u!==(u=ue(O[2])+"")&&fe(d,u)},d(O){O&&S(e),p=!1,me(b)}}}function Co(t){let e,n=t[1]&&jt(t);return{c(){n&&n.c(),e=ae()},m(o,s){n&&n.m(o,s),T(o,e,s)},p(o,[s]){o[1]?n?n.p(o,s):(n=jt(o),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:le,o:le,d(o){n&&n.d(o),o&&S(e)}}}function So(t,e,n){let o,s,l,i,{game:r}=e;function a(){w("command-reset-game")}function c(){w("command-continue-game")}return t.$$set=u=>{"game"in u&&n(5,r=u.game)},t.$$.update=()=>{var u,d,f;t.$$.dirty&32&&n(0,o=(u=r==null?void 0:r.state)==null?void 0:u.won),t.$$.dirty&32&&n(6,s=(d=r==null?void 0:r.state)==null?void 0:d.continues),t.$$.dirty&32&&n(2,l=(f=r==null?void 0:r.state)==null?void 0:f.lastWinTime),t.$$.dirty&65&&n(1,i=o>s)},[o,i,l,a,c,r,s]}class To extends ee{constructor(e){super(),x(this,e,So,Co,$,{game:5})}}function Pt(t,e,n){const o=t.slice();return o[6]=e[n].id,o[7]=e[n].data,o}function Nt(t){let e,n,o;var s=t[0][t[6]];function l(i){return{props:{game:i[1],data:i[7]}}}return s&&(e=dt(s,l(t))),{c(){e&&Z(e.$$.fragment),n=ae()},m(i,r){e&&K(e,i,r),T(i,n,r),o=!0},p(i,r){const a={};if(r&2&&(a.game=i[1]),r&4&&(a.data=i[7]),r&5&&s!==(s=i[0][i[6]])){if(e){he();const c=e;U(c.$$.fragment,1,0,()=>{J(c,1)}),ve()}s?(e=dt(s,l(i)),Z(e.$$.fragment),I(e.$$.fragment,1),K(e,n.parentNode,n)):e=null}else s&&e.$set(a)},i(i){o||(e&&I(e.$$.fragment,i),o=!0)},o(i){e&&U(e.$$.fragment,i),o=!1},d(i){i&&S(n),e&&J(e,i)}}}function Ao(t){let e,n,o=t[2],s=[];for(let i=0;i<o.length;i+=1)s[i]=Nt(Pt(t,o,i));const l=i=>U(s[i],1,1,()=>{s[i]=null});return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=ae()},m(i,r){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(i,r);T(i,e,r),n=!0},p(i,[r]){if(r&7){o=i[2];let a;for(a=0;a<o.length;a+=1){const c=Pt(i,o,a);s[a]?(s[a].p(c,r),I(s[a],1)):(s[a]=Nt(c),s[a].c(),I(s[a],1),s[a].m(e.parentNode,e))}for(he(),a=o.length;a<s.length;a+=1)l(a);ve()}},i(i){if(!n){for(let r=0;r<o.length;r+=1)I(s[r]);n=!0}},o(i){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)U(s[r]);n=!1},d(i){Ee(s,i),i&&S(e)}}}function Io(t,e,n){let{dialogs:o}=e,{game:s}=e;w.on("command-close-dialog",i),w.on("command-close-dialogs",r),w.on("command-open-dialog",l);function l(c,u=null){a.push({id:c,data:u})}function i(){a.pop()}function r(){n(2,a.length=0,a)}let a=[];return t.$$set=c=>{"dialogs"in c&&n(0,o=c.dialogs),"game"in c&&n(1,s=c.game)},[o,s,a]}class Oo extends ee{constructor(e){super(),x(this,e,Io,Ao,$,{dialogs:0,game:1})}}function Mo(t){let e,n,o,s,l;const i=t[4].default,r=Qt(i,t,t[3],null);return{c(){e=A("div"),n=A("div"),r&&r.c(),C(n,"class","dialog svelte-1pwpymc"),C(e,"class","holder svelte-1pwpymc")},m(a,c){T(a,e,c),v(e,n),r&&r.m(n,null),t[5](e),o=!0,s||(l=z(e,"click",t[1]),s=!0)},p(a,[c]){r&&r.p&&(!o||c&8)&&Kt(r,i,a,a[3],o?Yt(i,a[3],c,null):Jt(a[3]),null)},i(a){o||(I(r,a),o=!0)},o(a){U(r,a),o=!1},d(a){a&&S(e),r&&r.d(a),t[5](null),s=!1,l()}}}function Uo(t,e,n){let{$$slots:o={},$$scope:s}=e,{modal:l=!1}=e,i;function r(c){c.target===i&&!l&&w("command-close-dialog")}function a(c){de[c?"unshift":"push"](()=>{i=c,n(0,i)})}return t.$$set=c=>{"modal"in c&&n(2,l=c.modal),"$$scope"in c&&n(3,s=c.$$scope)},[i,r,l,s,o,a]}class Ro extends ee{constructor(e){super(),x(this,e,Uo,Mo,$,{modal:2})}}function Ht(t,e,n){const o=t.slice();return o[21]=e[n],o}function Bt(t){let e,n=ue(t[1])+"",o;return{c(){e=q("/ "),o=q(n)},m(s,l){T(s,e,l),T(s,o,l)},p(s,l){l&2&&n!==(n=ue(s[1])+"")&&fe(o,n)},d(s){s&&S(e),s&&S(o)}}}function Fo(t){let e;return{c(){e=A("div"),e.textContent="Autosave:",C(e,"class","autosave svelte-1s7ioka")},m(n,o){T(n,e,o)},p:le,d(n){n&&S(e)}}}function Lo(t){let e,n,o;function s(){return t[14](t[21])}return{c(){e=A("div"),e.textContent="Save >>",C(e,"class","button svelte-1s7ioka")},m(l,i){T(l,e,i),n||(o=[ne(re.call(null,e)),z(e,"basicaction",s)],n=!0)},p(l,i){t=l},d(l){l&&S(e),n=!1,me(o)}}}function Do(t){let e;return{c(){e=q("-- empty --")},m(n,o){T(n,e,o)},p:le,d(n){n&&S(e)}}}function jo(t){var m,g,_,p;let e=new Date((m=t[3][t[21]])==null?void 0:m._date).toLocaleDateString()+"",n,o,s=new Date((g=t[3][t[21]])==null?void 0:g._date).toLocaleTimeString()+"",l,i,r=ue((_=t[3][t[21]])==null?void 0:_.time)+"",a,c,u=((((p=t[3][t[21]])==null?void 0:p.resources)??0)/.26).toFixed(2)+"",d,f;return{c(){n=q(e),o=F(),l=q(s),i=q(`\r
                            |\r
                            `),a=q(r),c=q(`\r
                            |\r
                            `),d=q(u),f=q("%")},m(b,O){T(b,n,O),T(b,o,O),T(b,l,O),T(b,i,O),T(b,a,O),T(b,c,O),T(b,d,O),T(b,f,O)},p(b,O){var E,y,h,D;O&8&&e!==(e=new Date((E=b[3][b[21]])==null?void 0:E._date).toLocaleDateString()+"")&&fe(n,e),O&8&&s!==(s=new Date((y=b[3][b[21]])==null?void 0:y._date).toLocaleTimeString()+"")&&fe(l,s),O&8&&r!==(r=ue((h=b[3][b[21]])==null?void 0:h.time)+"")&&fe(a,r),O&8&&u!==(u=((((D=b[3][b[21]])==null?void 0:D.resources)??0)/.26).toFixed(2)+"")&&fe(d,u)},d(b){b&&S(n),b&&S(o),b&&S(l),b&&S(i),b&&S(a),b&&S(c),b&&S(d),b&&S(f)}}}function Gt(t){let e,n,o,s,l,i,r;function a(p,b){return p[21]!==""?Lo:Fo}let u=a(t)(t);function d(p,b){var O;return(O=p[3][p[21]])!=null&&O._date?jo:Do}let f=d(t),m=f(t);function g(){return t[15](t[21])}function _(){return t[16](t[21])}return{c(){e=A("div"),u.c(),n=F(),o=A("div"),m.c(),s=F(),l=A("div"),l.textContent=">> Load",C(o,"class","saveinfo svelte-1s7ioka"),C(l,"class","button svelte-1s7ioka"),C(e,"class","save svelte-1s7ioka")},m(p,b){T(p,e,b),u.m(e,null),v(e,n),v(e,o),m.m(o,null),v(e,s),v(e,l),i||(r=[ne(re.call(null,l)),z(l,"basicaction",g),z(l,"specialaction",_)],i=!0)},p(p,b){t=p,u.p(t,b),f===(f=d(t))&&m?m.p(t,b):(m.d(1),m=f(t),m&&(m.c(),m.m(o,null)))},d(p){p&&S(e),u.d(),m.d(),i=!1,me(r)}}}function Po(t){let e,n,o,s,l,i,r,a=ue(t[0])+"",c,u,d,f,m,g,_,p,b,O,E,y,h,D,H,L,X,ie,Y=t[4]&&Bt(t),G=t[5],W=[];for(let V=0;V<G.length;V+=1)W[V]=Gt(Ht(t,G,V));return{c(){e=A("div"),n=A("div"),n.textContent="Just have it!",o=F(),s=A("div"),s.textContent="X",l=F(),i=A("div"),r=q("Play time: "),c=q(a),u=F(),Y&&Y.c(),d=F(),f=A("div");for(let V=0;V<W.length;V+=1)W[V].c();m=F(),g=A("div"),_=A("div"),_.textContent="Export >>",p=F(),b=A("input"),O=F(),E=A("div"),E.textContent=">> Import",y=F(),h=A("div"),h.textContent="Right-click/long-tap to load without adding offline time.",D=F(),H=A("div"),L=A("div"),L.textContent="Reset game",C(n,"class","title svelte-1s7ioka"),C(s,"class","close button svelte-1s7ioka"),C(i,"class","time svelte-1s7ioka"),C(_,"class","button svelte-1s7ioka"),C(b,"class","savetext svelte-1s7ioka"),C(b,"placeholder","Paste save here"),C(E,"class","button svelte-1s7ioka"),C(g,"class","save svelte-1s7ioka"),C(h,"class","savehint svelte-1s7ioka"),C(f,"class","saves svelte-1s7ioka"),C(L,"class","button svelte-1s7ioka"),C(H,"class","buttons"),C(e,"class","container svelte-1s7ioka")},m(V,te){T(V,e,te),v(e,n),v(e,o),v(e,s),v(e,l),v(e,i),v(i,r),v(i,c),v(i,u),Y&&Y.m(i,null),v(e,d),v(e,f);for(let M=0;M<W.length;M+=1)W[M]&&W[M].m(f,null);v(f,m),v(f,g),v(g,_),v(g,p),v(g,b),ft(b,t[2]),v(g,O),v(g,E),v(f,y),v(f,h),v(e,D),v(e,H),v(H,L),X||(ie=[ne(re.call(null,s)),z(s,"basicaction",t[11]),ne(re.call(null,_)),z(_,"basicaction",t[6]),z(b,"input",t[17]),ne(re.call(null,E)),z(E,"basicaction",t[18]),z(E,"specialaction",t[19]),ne(re.call(null,L)),z(L,"basicaction",t[8])],X=!0)},p(V,te){if(te&1&&a!==(a=ue(V[0])+"")&&fe(c,a),V[4]?Y?Y.p(V,te):(Y=Bt(V),Y.c(),Y.m(i,null)):Y&&(Y.d(1),Y=null),te&1576){G=V[5];let M;for(M=0;M<G.length;M+=1){const k=Ht(V,G,M);W[M]?W[M].p(k,te):(W[M]=Gt(k),W[M].c(),W[M].m(f,m))}for(;M<W.length;M+=1)W[M].d(1);W.length=G.length}te&4&&b.value!==V[2]&&ft(b,V[2])},d(V){V&&S(e),Y&&Y.d(),Ee(W,V),X=!1,me(ie)}}}function No(t){let e,n;return e=new Ro({props:{$$slots:{default:[Po]},$$scope:{ctx:t}}}),{c(){Z(e.$$.fragment)},m(o,s){K(e,o,s),n=!0},p(o,[s]){const l={};s&16777247&&(l.$$scope={dirty:s,ctx:o}),e.$set(l)},i(o){n||(I(e.$$.fragment,o),n=!0)},o(o){U(e.$$.fragment,o),n=!1},d(o){J(e,o)}}}function Ho(t,e,n){let o,s,l;const i=["","SAVE1","SAVE2","SAVE3"];w.on("save-info-updated",p);let{game:r}=e,{data:a}=e,c="",u={};function d(){w("command-export-save")}function f(L){c!==""&&(w("command-import-save",c,L),w("command-close-dialogs"))}function m(){confirm("Reset game?")&&w("command-reset-game")}function g(L){w("command-save-game",L)}function _(L,X=!0){w("command-load-game",L,X),w("command-close-dialogs")}function p(L){n(3,u=L)}function b(){w("command-close-dialog")}it(()=>{w("command-update-save-info",i)});const O=L=>g(L),E=L=>_(L),y=L=>_(L,!1);function h(){c=this.value,n(2,c)}const D=()=>f(!0),H=()=>f(!1);return t.$$set=L=>{"game"in L&&n(12,r=L.game),"data"in L&&n(13,a=L.data)},t.$$.update=()=>{var L,X;t.$$.dirty&4096&&n(0,o=((L=r==null?void 0:r.state)==null?void 0:L.time)??0),t.$$.dirty&4096&&n(1,s=((X=r==null?void 0:r.state)==null?void 0:X.targetTime)??0),t.$$.dirty&3&&n(4,l=s-o>10)},[o,s,c,u,l,i,d,f,m,g,_,b,r,a,O,E,y,h,D,H]}class Bo extends ee{constructor(e){super(),x(this,e,Ho,No,$,{game:12,data:13})}}function qt(t){let e,n,o,s,l,i,r,a,c,u,d;return n=new io({props:{game:t[0]}}),s=new Eo({props:{game:t[0]}}),i=new Oo({props:{game:t[0],dialogs:t[1]}}),a=new xn({props:{game:t[0]}}),u=new To({props:{game:t[0]}}),{c(){var f,m,g;e=A("div"),Z(n.$$.fragment),o=F(),Z(s.$$.fragment),l=F(),Z(i.$$.fragment),r=F(),Z(a.$$.fragment),c=F(),Z(u.$$.fragment),C(e,"class","content svelte-19y9qm3"),ye(e,"no-icon-text",!((g=(m=(f=t[0])==null?void 0:f.state)==null?void 0:m.settings)!=null&&g.colorBlind))},m(f,m){T(f,e,m),K(n,e,null),v(e,o),K(s,e,null),T(f,l,m),K(i,f,m),T(f,r,m),K(a,f,m),T(f,c,m),K(u,f,m),d=!0},p(f,m){var E,y,h;const g={};m&1&&(g.game=f[0]),n.$set(g);const _={};m&1&&(_.game=f[0]),s.$set(_),(!d||m&1)&&ye(e,"no-icon-text",!((h=(y=(E=f[0])==null?void 0:E.state)==null?void 0:y.settings)!=null&&h.colorBlind));const p={};m&1&&(p.game=f[0]),i.$set(p);const b={};m&1&&(b.game=f[0]),a.$set(b);const O={};m&1&&(O.game=f[0]),u.$set(O)},i(f){d||(I(n.$$.fragment,f),I(s.$$.fragment,f),I(i.$$.fragment,f),I(a.$$.fragment,f),I(u.$$.fragment,f),d=!0)},o(f){U(n.$$.fragment,f),U(s.$$.fragment,f),U(i.$$.fragment,f),U(a.$$.fragment,f),U(u.$$.fragment,f),d=!1},d(f){f&&S(e),J(n),J(s),f&&S(l),J(i,f),f&&S(r),J(a,f),f&&S(c),J(u,f)}}}function Go(t){var s;let e,n,o=((s=t[0])==null?void 0:s.state)&&qt(t);return{c(){o&&o.c(),e=ae()},m(l,i){o&&o.m(l,i),T(l,e,i),n=!0},p(l,[i]){var r;(r=l[0])!=null&&r.state?o?(o.p(l,i),i&1&&I(o,1)):(o=qt(l),o.c(),I(o,1),o.m(e.parentNode,e)):o&&(he(),U(o,1,1,()=>{o=null}),ve())},i(l){n||(I(o),n=!0)},o(l){U(o),n=!1},d(l){o&&o.d(l),l&&S(e)}}}function qo(t,e,n){const o={menu:Bo};let{game:s}=e;return t.$$set=l=>{"game"in l&&n(0,s=l.game)},[s,o]}class Vo extends ee{constructor(e){super(),x(this,e,qo,Go,$,{game:0})}}function Qo(t,e,n){let{rate:o=60}=e,{boost:s=1}=e,{event:l="command-tick"}=e,i=null,r=performance.now();function a(u,d){i&&clearInterval(i),i=setInterval(c,1e3/u)}function c(){const u=performance.now(),d=(u-r)/1e3,f=d*s;w(l,f,+s,d),r=u}return rt(()=>{clearInterval(i)}),t.$$set=u=>{"rate"in u&&n(0,o=u.rate),"boost"in u&&n(1,s=u.boost),"event"in u&&n(2,l=u.event)},t.$$.update=()=>{t.$$.dirty&1&&a(o)},[o,s,l]}class Wo extends ee{constructor(e){super(),x(this,e,Qo,null,$,{rate:0,boost:1,event:2})}}var ze,Ze,en,Be,st;class Qe{static async enable(){await je(this,Be,st).call(this),document.addEventListener("visibilitychange",async()=>{await je(this,Be,st).call(this)})}}ze=new WeakMap,Ze=new WeakSet,en=function(e){De(this,ze,e)},Be=new WeakSet,st=async function(){var n;if(document.visibilityState!=="visible")return;const e=await((n=navigator.wakeLock)==null?void 0:n.request("screen"));je(this,Ze,en).call(this,e)},pe(Qe,Ze),pe(Qe,Be),pe(Qe,ze,null);function Yo(t){let e,n,o,s,l,i,r;function a(u){t[1](u)}let c={};return t[0]!==void 0&&(c.game=t[0]),e=new Yn({props:c}),de.push(()=>we(e,"game",a)),s=new Vo({props:{game:t[0]}}),i=new Wo({props:{rate:"30",boost:"1",event:"command-tick"}}),{c(){Z(e.$$.fragment),o=F(),Z(s.$$.fragment),l=F(),Z(i.$$.fragment)},m(u,d){K(e,u,d),T(u,o,d),K(s,u,d),T(u,l,d),K(i,u,d),r=!0},p(u,[d]){const f={};!n&&d&1&&(n=!0,f.game=u[0],ke(()=>n=!1)),e.$set(f);const m={};d&1&&(m.game=u[0]),s.$set(m)},i(u){r||(I(e.$$.fragment,u),I(s.$$.fragment,u),I(i.$$.fragment,u),r=!0)},o(u){U(e.$$.fragment,u),U(s.$$.fragment,u),U(i.$$.fragment,u),r=!1},d(u){J(e,u),u&&S(o),J(s,u),u&&S(l),J(i,u)}}}function Ko(t,e,n){Qe.enable();let o={};function s(l){o=l,n(0,o)}return[o,s]}class Jo extends ee{constructor(e){super(),x(this,e,Ko,Yo,$,{})}}new Jo({target:document.getElementById("app")});
